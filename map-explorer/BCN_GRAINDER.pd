#N canvas 672 23 745 652 10;
#X obj 210 174 tgl 150 0 render-on render-on-set empty 17 7 0 12 -262144
-1 -1 0 1;
#X obj 38 4 r coords;
#X obj 38 25 unpack;
#X floatatom 38 50 5 0 0 0 - - -, f 5;
#X floatatom 79 50 5 0 0 0 - - -, f 5;
#N canvas 253 44 845 635 UNUSED 0;
#X obj 42 311 openpanel;
#X obj 42 355 soundfiler;
#X obj 42 289 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#N canvas 0 22 450 300 (subpatch) 0;
#X array source-array 151104 float 2;
#X coords 0 1 151104 -1 100 100 1;
#X restore 230 299 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array grain-env 2048 float 0;
#X coords 0 1 2047 -1 100 100 1;
#X restore 209 102 graph;
#X msg 42 332 read -resize \$1 source-array;
#X obj 42 377 s filesize;
#X obj 130 461 catch~ bus;
#X obj 123 541 dac~;
#N canvas 46 324 1280 340 make-grain-env 0;
#X obj 16 42 t b b;
#X obj 16 106 f;
#X obj 44 106 + 1;
#X msg 54 63 0;
#X obj 16 85 until;
#X obj 16 127 t f f;
#X obj 16 20 inlet;
#X obj 16 188 tabwrite grain-env;
#X msg 16 63 2048;
#X obj 16 148 expr ($f1-1024)/1024;
#X obj 16 168 expr 0.5+(cos($f1 * 3.141)/2);
#X obj 205 8 t b b;
#X obj 205 72 f;
#X obj 233 72 + 1;
#X msg 243 29 0;
#X obj 205 51 until;
#X obj 205 93 t f f;
#X obj 205 -14 inlet;
#X obj 205 179 tabwrite grain-env;
#X msg 205 29 2048;
#X obj 205 114 expr ($f1-1024)/1024;
#X obj 205 144 expr (sin($f1 * 3.141)/2);
#X obj 207 213 tabwrite wavetable1;
#X obj 787 3 t b b;
#X obj 787 70 f;
#X obj 852 71 + 1;
#X msg 844 26 0;
#X obj 787 46 until;
#X obj 787 92 t f f f;
#X obj 787 -18 inlet;
#X obj 88 235 tabwrite array1;
#X msg 787 24 2048;
#X obj 396 13 t b b;
#X obj 396 77 f;
#X obj 424 77 + 1;
#X msg 434 34 0;
#X obj 396 56 until;
#X obj 396 98 t f f;
#X obj 396 -9 inlet;
#X obj 396 184 tabwrite grain-env;
#X msg 396 34 2048;
#X obj 396 119 expr ($f1-1024)/1024;
#X obj 571 11 t b b;
#X obj 571 75 f;
#X obj 599 75 + 1;
#X msg 609 32 0;
#X obj 571 54 until;
#X obj 571 96 t f f;
#X obj 571 -11 inlet;
#X obj 571 182 tabwrite grain-env;
#X msg 571 32 2048;
#X obj 571 117 expr ($f1-1024)/1024;
#X obj 571 146 expr (cos($f1 * 5.541));
#X obj 396 148 expr (cos($f1 * 0.941));
#X obj 787 133 expr ($f1-1024)/1024;
#X obj 787 195 tabwrite grain-env;
#X obj 788 161 expr (atan($f1)*cos(5*$f1));
#X obj 988 5 t b b;
#X obj 988 72 f;
#X obj 1053 73 + 1;
#X msg 1045 28 0;
#X obj 988 48 until;
#X obj 988 94 t f f f;
#X obj 988 -16 inlet;
#X msg 988 26 2048;
#X obj 989 190 tabwrite grain-env;
#X obj 990 162 expr (atan(2*$f1)*sin(5*$f1));
#X obj 988 135 expr ($f1-1024)/1024;
#X obj 1171 5 t b b;
#X obj 1171 72 f;
#X obj 1236 73 + 1;
#X msg 1228 28 0;
#X obj 1171 48 until;
#X obj 1171 94 t f f f;
#X obj 1171 -16 inlet;
#X msg 1171 26 2048;
#X obj 1172 190 tabwrite grain-env;
#X obj 1171 135 expr ($f1-1024)/1024;
#X obj 1171 164 expr (atan(0.5*$f1)*cos(5*$f1));
#X obj 1375 192 tabwrite grain-env;
#X obj 1374 -4 t b b;
#X obj 1374 63 f;
#X obj 1439 64 + 1;
#X msg 1431 19 0;
#X obj 1374 39 until;
#X obj 1374 85 t f f f;
#X obj 1374 -25 inlet;
#X msg 1374 17 2048;
#X obj 1374 126 expr ($f1-1024)/1024;
#X obj 1375 159 expr cos(3.14*$f1/2);
#X connect 0 0 8 0;
#X connect 0 1 3 0;
#X connect 1 0 2 0;
#X connect 1 0 5 0;
#X connect 2 0 1 1;
#X connect 3 0 1 1;
#X connect 4 0 1 0;
#X connect 5 0 9 0;
#X connect 5 1 7 1;
#X connect 5 1 30 1;
#X connect 6 0 0 0;
#X connect 8 0 4 0;
#X connect 9 0 10 0;
#X connect 10 0 7 0;
#X connect 10 0 30 0;
#X connect 11 0 19 0;
#X connect 11 1 14 0;
#X connect 12 0 13 0;
#X connect 12 0 16 0;
#X connect 13 0 12 1;
#X connect 14 0 12 1;
#X connect 15 0 12 0;
#X connect 16 0 20 0;
#X connect 16 1 18 1;
#X connect 16 1 22 1;
#X connect 17 0 11 0;
#X connect 19 0 15 0;
#X connect 20 0 21 0;
#X connect 21 0 18 0;
#X connect 21 0 22 0;
#X connect 23 0 31 0;
#X connect 23 1 26 0;
#X connect 24 0 25 0;
#X connect 24 0 28 0;
#X connect 25 0 24 1;
#X connect 26 0 24 1;
#X connect 27 0 24 0;
#X connect 28 0 54 0;
#X connect 28 2 55 1;
#X connect 29 0 23 0;
#X connect 31 0 27 0;
#X connect 32 0 40 0;
#X connect 32 1 35 0;
#X connect 33 0 34 0;
#X connect 33 0 37 0;
#X connect 34 0 33 1;
#X connect 35 0 33 1;
#X connect 36 0 33 0;
#X connect 37 0 41 0;
#X connect 37 1 39 1;
#X connect 38 0 32 0;
#X connect 40 0 36 0;
#X connect 41 0 53 0;
#X connect 42 0 50 0;
#X connect 42 1 45 0;
#X connect 43 0 44 0;
#X connect 43 0 47 0;
#X connect 44 0 43 1;
#X connect 45 0 43 1;
#X connect 46 0 43 0;
#X connect 47 0 51 0;
#X connect 47 1 49 1;
#X connect 48 0 42 0;
#X connect 50 0 46 0;
#X connect 51 0 52 0;
#X connect 52 0 49 0;
#X connect 53 0 39 0;
#X connect 54 0 56 0;
#X connect 56 0 55 0;
#X connect 57 0 64 0;
#X connect 57 1 60 0;
#X connect 58 0 59 0;
#X connect 58 0 62 0;
#X connect 59 0 58 1;
#X connect 60 0 58 1;
#X connect 61 0 58 0;
#X connect 62 0 67 0;
#X connect 62 2 65 1;
#X connect 63 0 57 0;
#X connect 64 0 61 0;
#X connect 66 0 65 0;
#X connect 67 0 66 0;
#X connect 68 0 75 0;
#X connect 68 1 71 0;
#X connect 69 0 70 0;
#X connect 69 0 73 0;
#X connect 70 0 69 1;
#X connect 71 0 69 1;
#X connect 72 0 69 0;
#X connect 73 0 77 0;
#X connect 73 2 76 1;
#X connect 74 0 68 0;
#X connect 75 0 72 0;
#X connect 77 0 78 0;
#X connect 78 0 76 0;
#X connect 80 0 87 0;
#X connect 80 1 83 0;
#X connect 81 0 82 0;
#X connect 81 0 85 0;
#X connect 82 0 81 1;
#X connect 83 0 81 1;
#X connect 84 0 81 0;
#X connect 85 0 88 0;
#X connect 85 2 79 1;
#X connect 86 0 80 0;
#X connect 87 0 84 0;
#X connect 88 0 89 0;
#X connect 89 0 79 0;
#X restore 77 161 pd make-grain-env;
#X obj 163 495 rev3~ 95 90;
#X obj 76 101 hradio 15 1 0 8 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X obj 76 124 sel 0 1 2 3 4 5 6 7;
#X text 17 39 CHANGING THE ENVELOPE SHAPE INDEED CAN AFFECT THE GRAIN
QUALITY NOTABLY \, HOWEVER \, I WOULD KEEP IT SIMPLE AND STATIC WITH
A REGULAR HANNING...;
#X text 16 15 UNUSED:::::::::::::::::::;
#X text 22 226 REGARDING THE SOURCE SOUND... I WOULD TRY TO INTEGRATE
IT SO THAT EACH GRANULAR PLAYER (FORMER FILEPLAYER) HOLDS EACH INDIVIDUAL
SOUNDFILE... SO YOU SHOULD NOT NEED ADDITIONAL SOUNDFILES...;
#X text 16 422 I DON'T THINK YOU NEED ADDITIONAL REVERB UNTIL EVERYTHING
ELSE IS WORKING PROPERLY!;
#X text 17 570 ALSO \, THERE ARE SOME INCONSISTENCIES IN THE SENDS/RECEIVES...
CATCH BUS CATCH GRAIN-BUS...;
#X obj 435 350 grainvoice;
#X obj 526 302 route 0 1 2 3;
#X obj 547 123 f;
#X obj 575 123 + 1;
#X obj 547 148 mod 4;
#X obj 547 172 t f b b;
#X obj 526 279 pack f f f;
#X obj 547 99 metro 100;
#X obj 547 79 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 0 1
;
#X obj 591 259 + 1;
#X obj 591 238 / 10000;
#X obj 591 217 random 200;
#X msg 435 329 \$1 \$2 1;
#X msg 518 328 \$1 \$2 1;
#X msg 602 328 \$1 \$2 1;
#X msg 681 327 \$1 \$2 1;
#X obj 558 197 random 10000;
#X obj 573 9 r graindur;
#X obj 605 31 r overlap;
#X obj 605 78 /;
#X obj 605 54 t b f;
#X obj 573 31 / 2;
#X text 437 376 THE GRAINVOICES SEEM WELL IMPLEMENTED... BUT YOU NEED
TO CLARIFY THE STRATEGY A BIT BETTTER.... I THINK IN YOUR APPROACH...
GRAINS SHOULD BE ABLE TO:;
#X text 453 425 - READ FROM MULTIPLE FILES ACCORDING THE MOUSE POSITION
;
#X text 453 445 - ADJUSTING THE PARAMETERS FOR EACH GRAIN (FILE) DYNAMICALLY)
;
#X obj 518 349 grainvoice;
#X obj 602 349 grainvoice;
#X obj 681 348 grainvoice;
#X obj 486 315 pi;
#X obj 509 283 loadbang;
#X text 436 492 THEREFORE... I'VE CREATED A NEW ABSTRACTION CALLED
"FILE-MAHAGER" TAKING CARE OF SENDING THE CONTROL OF EACH DOT (SOUNDFILE)
IN THE MAP \, AND ANOTHER ABSTRACTION NEWGRAINVOICE \, THAT SUSTITUTES
THE GRAINVOICE ONE AND THAT IS CONTAINED IN EACH FILE_MANAGER FILES
;
#X connect 0 0 5 0;
#X connect 1 0 6 0;
#X connect 2 0 0 0;
#X connect 5 0 1 0;
#X connect 7 0 8 0;
#X connect 7 0 8 1;
#X connect 7 0 10 0;
#X connect 10 0 8 0;
#X connect 10 1 8 1;
#X connect 11 0 12 0;
#X connect 12 0 9 0;
#X connect 12 1 9 1;
#X connect 12 2 9 2;
#X connect 12 3 9 3;
#X connect 12 4 9 4;
#X connect 12 5 9 5;
#X connect 12 6 9 6;
#X connect 19 0 30 0;
#X connect 19 1 31 0;
#X connect 19 2 32 0;
#X connect 19 3 33 0;
#X connect 20 0 21 0;
#X connect 20 0 22 0;
#X connect 21 0 20 1;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 23 1 34 0;
#X connect 23 2 29 0;
#X connect 24 0 19 0;
#X connect 25 0 20 0;
#X connect 26 0 25 0;
#X connect 27 0 24 2;
#X connect 28 0 27 0;
#X connect 29 0 28 0;
#X connect 30 0 18 0;
#X connect 31 0 43 0;
#X connect 32 0 44 0;
#X connect 33 0 45 0;
#X connect 34 0 24 1;
#X connect 35 0 39 0;
#X connect 36 0 38 0;
#X connect 37 0 25 1;
#X connect 38 0 37 0;
#X connect 38 1 37 1;
#X connect 39 0 37 0;
#X connect 47 0 46 0;
#X restore 33 413 pd UNUSED OPEN AND EVENTUALLY DELETE!!!!!!!!;
#X obj 56 472 catch~ grain-R;
#X obj 34 447 catch~ grain-L;
#X obj 34 116 loadbang;
#X obj 34 226 pi;
#X obj 34 249 s pi;
#N canvas 394 27 430 444 gemwin-settings 0;
#X obj 26 -22 gemwin;
#X msg 26 -88 reset \, title barcelona \, offset 0 0 \, lighting 0
\, dimen 800 800 \, create \, 1;
#X msg 45 -51 0 \, destroy;
#X obj 26 -137 r render-on;
#X obj 26 -114 sel 1 0;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 4 1 2 0;
#X restore 34 311 pd gemwin-settings;
#N canvas 650 168 567 642 mouseover 0;
#X obj -255 292 translateXYZ;
#X obj -237 314 r lb1;
#X obj -255 400 circle 0.1;
#X obj -255 36 gemhead 70;
#X obj -255 57 alpha;
#X msg -237 336 draw fill;
#N canvas 364 207 223 195 draw-prep-x 0;
#X obj 85 58 inlet;
#X obj 85 169 outlet;
#X obj 85 108 * 8;
#X obj 85 129 - 4;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 1 0;
#X restore -232 268 pd draw-prep-x;
#N canvas 364 207 223 214 draw-prep-y 0;
#X obj 37 30 inlet;
#X obj 37 161 outlet;
#X obj 37 67 swap 1;
#X obj 37 89 -;
#X obj 37 110 * 8;
#X obj 37 131 - 4;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 1 0;
#X restore -215 244 pd draw-prep-y;
#X obj -232 108 gemmouse 1 1;
#X obj -100 348 +;
#X obj -70 348 f;
#X obj -100 323 spigot;
#X obj -106 216 t f f;
#X obj -100 242 -;
#X obj -106 149 - 1;
#X obj -106 172 abs;
#X obj -106 194 * 5;
#X obj -332 276 s coords;
#X obj -332 252 pack 0 0;
#X obj -332 203 * 2;
#X obj -332 226 - 1;
#X obj -287 203 * -2;
#X obj -287 226 + 1;
#X obj -99 396 s radius;
#X obj -255 82 color 0 1 0 0.2;
#X floatatom -131 423 5 0 0 0 - - -, f 5;
#X obj -99 371 clip 0.1 5;
#X connect 0 0 2 0;
#X connect 1 0 5 0;
#X connect 3 0 4 0;
#X connect 4 0 24 0;
#X connect 5 0 2 0;
#X connect 6 0 0 1;
#X connect 7 0 0 2;
#X connect 8 0 6 0;
#X connect 8 0 19 0;
#X connect 8 1 7 0;
#X connect 8 1 14 0;
#X connect 8 1 21 0;
#X connect 8 2 11 1;
#X connect 9 0 26 0;
#X connect 10 0 9 1;
#X connect 11 0 9 0;
#X connect 12 0 13 1;
#X connect 12 1 13 0;
#X connect 13 0 11 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 12 0;
#X connect 18 0 17 0;
#X connect 19 0 20 0;
#X connect 20 0 18 0;
#X connect 21 0 22 0;
#X connect 22 0 18 1;
#X connect 24 0 0 0;
#X connect 26 0 10 0;
#X connect 26 0 2 1;
#X connect 26 0 23 0;
#X connect 26 0 25 0;
#X restore 34 291 pd mouseover;
#N canvas 679 292 450 300 picture 0;
#X obj -14 40 gemhead;
#X obj -14 61 pix_image barcelona.jpg;
#X obj -14 85 pix_draw;
#X text -17 20 THIS IS THE IMAGE;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X restore 34 270 pd picture;
#X text 40 72 args of file_manager: name_of_soundfile x_coord y_coord
;
#X text 40 92 x and y coordinates are in range -1 to 1;
#X text 116 50 HELPFUL TO LOCATE SOUNDS MANUALLY;
#X text 94 116 THESE SETTINGS WILL INFLUENCE THE PERFORMANCE;
#X obj 34 392 file_manager city2 0.915 -0.41;
#X obj 56 496 *~ 0.5;
#X obj 35 527 *~ 0.5;
#X obj 35 551 dac~;
#X text 167 532 OVERLAP: DOES NOT APPLY;
#X text 167 552 PANNING: AUTOMATIC;
#X text 167 572 GRAIN AMPLITUDE: INVERSE OF DISTANCE TO CENTER;
#X text 167 452 GRAIN START: RANDOM;
#X text 167 512 GRAIN PITCH: NOT IMPLEMENTED;
#X text 167 472 GRAIN SIZE: PHASE;
#X text 167 492 GRAIN INTERONSET TIME: RADIUS;
#X msg 34 139 bang \; pd dsp 1 \; min_grainsize 10 \; max_grainsize
500 \; min_silence 0 \; max_silence 600 \;;
#X obj 34 332 file_manager city1 0 0;
#X obj 34 372 file_manager disco1 -0.78 -0.21;
#X obj 34 352 file_manager sea1 -0.3 -0.7;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 6 0 19 0;
#X connect 7 0 20 0;
#X connect 8 0 29 0;
#X connect 9 0 10 0;
#X connect 19 0 21 1;
#X connect 20 0 21 0;
#X connect 29 0 9 0;
